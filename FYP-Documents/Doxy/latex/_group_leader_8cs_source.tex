\hypertarget{_group_leader_8cs_source}{}\doxysection{Group\+Leader.\+cs}
\label{_group_leader_8cs_source}\index{C:/Users/gameuser/Desktop/4th Year Work/Project/4thYearProject/RTS/Assets/Resources/Scripts/Unit Scripts/GroupLeader.cs@{C:/Users/gameuser/Desktop/4th Year Work/Project/4thYearProject/RTS/Assets/Resources/Scripts/Unit Scripts/GroupLeader.cs}}
\mbox{\hyperlink{_group_leader_8cs}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00001}00001 \textcolor{keyword}{using }System.Collections;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00002}00002 \textcolor{keyword}{using }System.Collections.Generic;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00003}00003 \textcolor{keyword}{using }System.Linq;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00004}00004 \textcolor{keyword}{using }TMPro;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00005}00005 \textcolor{keyword}{using }UnityEngine;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00006}00006 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00011}\mbox{\hyperlink{class_group_leader}{00011}} \textcolor{keyword}{public} \textcolor{keyword}{class }\mbox{\hyperlink{class_group_leader}{GroupLeader}} : MonoBehaviour}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00012}00012 \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00013}\mbox{\hyperlink{class_group_leader_a3daa8e83b2e26ccdd5f8676bc55ee2f9}{00013}}     \textcolor{keyword}{public} List<Transform> \mbox{\hyperlink{class_group_leader_a3daa8e83b2e26ccdd5f8676bc55ee2f9}{m\_positions}} = \textcolor{keyword}{new} List<Transform>();}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00014}00014     \textcolor{comment}{// Group info}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00015}00015     [Header(\textcolor{stringliteral}{"{}Group Info"{}})]}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00016}\mbox{\hyperlink{class_group_leader_a5cda7a4eb66250d8b73ffef64ec059c4}{00016}}     \textcolor{keyword}{public} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_group_leader_a5cda7a4eb66250d8b73ffef64ec059c4}{groupID}} = -\/1;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00017}\mbox{\hyperlink{class_group_leader_a9ed1939ca322e7b2c1038adaadfaca28}{00017}}     \textcolor{keyword}{public} List<BaseUnit> \mbox{\hyperlink{class_group_leader_a9ed1939ca322e7b2c1038adaadfaca28}{units}} = \textcolor{keyword}{new} List<BaseUnit>();}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00018}\mbox{\hyperlink{class_group_leader_aad251bd1188b3a8e02e48209775908c4}{00018}}     \textcolor{keyword}{public} \textcolor{keywordtype}{float} \mbox{\hyperlink{class_group_leader_aad251bd1188b3a8e02e48209775908c4}{m\_spacing}} = 2;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00019}00019 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00020}\mbox{\hyperlink{class_group_leader_aef9bc428b499f2d95024ea43c9090b43}{00020}}     [SerializeField] \textcolor{keyword}{private} \textcolor{keywordtype}{float} \mbox{\hyperlink{class_group_leader_aef9bc428b499f2d95024ea43c9090b43}{m\_StopDistance}} = 1;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00021}\mbox{\hyperlink{class_group_leader_a22470bec3dc7f92b0bc17282d9c94a54}{00021}}     \textcolor{keyword}{private} Vector3 \mbox{\hyperlink{class_group_leader_a22470bec3dc7f92b0bc17282d9c94a54}{m\_Target}};}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00022}\mbox{\hyperlink{class_group_leader_adf780ff077ef2f3a660754278d9781be}{00022}}     \textcolor{keyword}{private} Vector3 \mbox{\hyperlink{class_group_leader_adf780ff077ef2f3a660754278d9781be}{m\_TargetDirection}};}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00023}00023 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00024}\mbox{\hyperlink{class_group_leader_a7abe5666d339b95997a56481e5b76df7}{00024}}     \textcolor{keyword}{private} \textcolor{keywordtype}{float} \mbox{\hyperlink{class_group_leader_a7abe5666d339b95997a56481e5b76df7}{m\_MaxSpeed}} = 5f;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00025}\mbox{\hyperlink{class_group_leader_a3598e33b6da7686226b55503f6935a24}{00025}}     \textcolor{keyword}{private} \textcolor{keywordtype}{float} \mbox{\hyperlink{class_group_leader_a3598e33b6da7686226b55503f6935a24}{m\_Speed}} = 0f;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00026}00026 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00027}\mbox{\hyperlink{class_group_leader_aa94facfb49448d1b7a0aa6c7f4f36c15}{00027}}     [SerializeField] \textcolor{keyword}{private} GameObject \mbox{\hyperlink{class_group_leader_aa94facfb49448d1b7a0aa6c7f4f36c15}{m\_FormationPointPrefab}};}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00028}00028     \textcolor{comment}{// Start is called before the first frame update}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00029}\mbox{\hyperlink{class_group_leader_ac9a4aca87c8229f65e14f6f17702f05e}{00029}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_group_leader_ac9a4aca87c8229f65e14f6f17702f05e}{Start}}()}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00030}00030     \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00031}00031         \mbox{\hyperlink{class_group_leader_a22470bec3dc7f92b0bc17282d9c94a54}{m\_Target}} = transform.position;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00032}00032         \mbox{\hyperlink{class_group_leader_adf780ff077ef2f3a660754278d9781be}{m\_TargetDirection}} = transform.position;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00033}00033     \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00035}00035     \textcolor{comment}{// Update is called once per frame}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00036}\mbox{\hyperlink{class_group_leader_abebadd3264c9dbe06fa32a73a7867097}{00036}}     \textcolor{keyword}{private} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_group_leader_abebadd3264c9dbe06fa32a73a7867097}{FixedUpdate}}()}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00037}00037     \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00038}00038             \textcolor{comment}{// If we are further away than stop distance}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00039}00039             \textcolor{keywordtype}{float} targetDistance = Vector3.Distance(transform.position, \mbox{\hyperlink{class_group_leader_a22470bec3dc7f92b0bc17282d9c94a54}{m\_Target}});}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00040}00040         \textcolor{keywordflow}{if} (targetDistance > \mbox{\hyperlink{class_group_leader_aef9bc428b499f2d95024ea43c9090b43}{m\_StopDistance}})}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00041}00041         \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00042}00042             Vector3 v = \textcolor{keyword}{new} Vector3(transform.position.x, transform.position.y, 0);}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00043}00043             \mbox{\hyperlink{class_group_leader_adf780ff077ef2f3a660754278d9781be}{m\_TargetDirection}} = (\mbox{\hyperlink{class_group_leader_a22470bec3dc7f92b0bc17282d9c94a54}{m\_Target}} -\/ v).normalized;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00044}00044             Debug.Log(\textcolor{stringliteral}{"{}Target Direction: "{}} + \mbox{\hyperlink{class_group_leader_adf780ff077ef2f3a660754278d9781be}{m\_TargetDirection}});}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00045}00045             \mbox{\hyperlink{class_group_leader_a3598e33b6da7686226b55503f6935a24}{m\_Speed}} = \mbox{\hyperlink{class_group_leader_a7abe5666d339b95997a56481e5b76df7}{m\_MaxSpeed}};}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00046}00046         \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00047}00047         \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00048}00048         \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00049}00049             \textcolor{comment}{// Reset speed and angular velocity}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00050}00050             \mbox{\hyperlink{class_group_leader_a3598e33b6da7686226b55503f6935a24}{m\_Speed}} = 0f;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00051}00051         \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00052}00052         \textcolor{comment}{// If we have a speed}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00053}00053         \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_group_leader_a3598e33b6da7686226b55503f6935a24}{m\_Speed}} != 0f)}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00054}00054         \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00055}00055 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00056}00056             \textcolor{keywordtype}{float} rotation = Mathf.Atan2(\mbox{\hyperlink{class_group_leader_adf780ff077ef2f3a660754278d9781be}{m\_TargetDirection}}.y, \mbox{\hyperlink{class_group_leader_adf780ff077ef2f3a660754278d9781be}{m\_TargetDirection}}.x) * Mathf.Rad2Deg;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00057}00057             rotation -\/= 90;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00058}00058             \textcolor{comment}{//m\_Rigidbody2D.angularVelocity = rotation * -\/m\_AngularSpeed;}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00059}00059             transform.rotation = Quaternion.Euler(0, 0, rotation);}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00060}00060             transform.position += (\mbox{\hyperlink{class_group_leader_a3598e33b6da7686226b55503f6935a24}{m\_Speed}} * \mbox{\hyperlink{class_group_leader_adf780ff077ef2f3a660754278d9781be}{m\_TargetDirection}} * Time.fixedDeltaTime);}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00061}00061         \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00062}00062 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00063}00063         \mbox{\hyperlink{class_group_leader_a254c0e8599be096f58b45118b69c5969}{RemoveExcessTransformations}}();}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00064}00064         \mbox{\hyperlink{class_group_leader_ab3e2fd1b28e4f42d8ebaaa87a5338236}{MoveUnits}}();}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00065}00065 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00066}00066         \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_group_leader_a9ed1939ca322e7b2c1038adaadfaca28}{units}}.Count == 0)}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00067}00067         \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00068}00068             Destroy(gameObject);}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00069}00069         \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00070}00070 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00071}00071 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00072}00072         gameObject.GetComponent<SpriteRenderer>().enabled = \mbox{\hyperlink{class_game_manager}{GameManager}}.\mbox{\hyperlink{class_game_manager_a7666e8468dac197b9eb32dd32128524f}{instance}}.\mbox{\hyperlink{class_game_manager_a7aed1c66e288d6712e7b04c12bd0d5cc}{m\_debugMode}};}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00073}00073 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00074}00074         for (\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{class_group_leader_a3daa8e83b2e26ccdd5f8676bc55ee2f9}{m\_positions}}.Count; i++)}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00075}00075         \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00076}00076             \mbox{\hyperlink{class_group_leader_a3daa8e83b2e26ccdd5f8676bc55ee2f9}{m\_positions}}[i].GetComponent<SpriteRenderer>().enabled = \mbox{\hyperlink{class_game_manager}{GameManager}}.\mbox{\hyperlink{class_game_manager_a7666e8468dac197b9eb32dd32128524f}{instance}}.\mbox{\hyperlink{class_game_manager_a7aed1c66e288d6712e7b04c12bd0d5cc}{m\_debugMode}};}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00077}00077         \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00078}00078         }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00079}00079     \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00080}00080 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00081}00081     \textcolor{comment}{// Removes unecessary transformation points}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00082}\mbox{\hyperlink{class_group_leader_a254c0e8599be096f58b45118b69c5969}{00082}}     \textcolor{keyword}{private} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_group_leader_a254c0e8599be096f58b45118b69c5969}{RemoveExcessTransformations}}()}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00083}00083     \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00084}00084         \textcolor{keywordflow}{foreach} (\mbox{\hyperlink{class_base_unit}{BaseUnit}} unit \textcolor{keywordflow}{in} \mbox{\hyperlink{class_group_leader_a9ed1939ca322e7b2c1038adaadfaca28}{units}})}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00085}00085         \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00086}00086             \textcolor{keywordflow}{if} (unit == \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00087}00087             \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00088}00088                 \mbox{\hyperlink{class_group_leader_a9ed1939ca322e7b2c1038adaadfaca28}{units}}.Remove(unit);}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00089}00089             \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00090}00090         \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00091}00091 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00092}00092         \textcolor{comment}{// If we have more transforms than needed, remove last ones}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00093}00093         \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_group_leader_a3daa8e83b2e26ccdd5f8676bc55ee2f9}{m\_positions}}.Count > \mbox{\hyperlink{class_group_leader_a9ed1939ca322e7b2c1038adaadfaca28}{units}}.Count)}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00094}00094         \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00095}00095             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} index = \mbox{\hyperlink{class_group_leader_a3daa8e83b2e26ccdd5f8676bc55ee2f9}{m\_positions}}.Count; index < \mbox{\hyperlink{class_group_leader_a3daa8e83b2e26ccdd5f8676bc55ee2f9}{m\_positions}}.Count; index++)}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00096}00096             \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00097}00097                 \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_group_leader_a9ed1939ca322e7b2c1038adaadfaca28}{units}}[index] == \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00098}00098                 \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00099}00099                     \mbox{\hyperlink{class_group_leader_a9ed1939ca322e7b2c1038adaadfaca28}{units}}.RemoveAt(index);}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00100}00100                     Destroy(\mbox{\hyperlink{class_group_leader_a3daa8e83b2e26ccdd5f8676bc55ee2f9}{m\_positions}}[index].gameObject);}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00101}00101                     \mbox{\hyperlink{class_group_leader_a3daa8e83b2e26ccdd5f8676bc55ee2f9}{m\_positions}}.RemoveAt(index);}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00102}00102                 \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00103}00103 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00104}00104             \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00105}00105         \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00106}00106     \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00107}\mbox{\hyperlink{class_group_leader_ab3e2fd1b28e4f42d8ebaaa87a5338236}{00107}}     \textcolor{keyword}{private} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_group_leader_ab3e2fd1b28e4f42d8ebaaa87a5338236}{MoveUnits}}()}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00108}00108     \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00109}00109         Debug.Log(\textcolor{stringliteral}{"{}Unit count :"{}} + \mbox{\hyperlink{class_group_leader_a9ed1939ca322e7b2c1038adaadfaca28}{units}}.Count);}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00110}00110         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} index = 0; index < \mbox{\hyperlink{class_group_leader_a9ed1939ca322e7b2c1038adaadfaca28}{units}}.Count; index++)}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00111}00111         \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00112}00112             \mbox{\hyperlink{class_group_leader_a9ed1939ca322e7b2c1038adaadfaca28}{units}}[index].SetTargetPosition(\mbox{\hyperlink{class_group_leader_a3daa8e83b2e26ccdd5f8676bc55ee2f9}{m\_positions}}[index].position);}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00113}00113         \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00114}00114     \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00115}00115     \textcolor{comment}{// Sets a new leader location}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00116}\mbox{\hyperlink{class_group_leader_a064403acee578988a33a8e31167e4586}{00116}}     \textcolor{keyword}{public} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_group_leader_a064403acee578988a33a8e31167e4586}{SetLocation}}(Vector3 location)}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00117}00117     \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00118}00118         transform.position = location;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00119}00119         \mbox{\hyperlink{class_group_leader_a22470bec3dc7f92b0bc17282d9c94a54}{m\_Target}} = location;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00120}00120     \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00121}00121     \textcolor{comment}{// Set a new target}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00122}\mbox{\hyperlink{class_group_leader_a54e85d2941924c0c4c77032829f8d7f3}{00122}}     \textcolor{keyword}{public} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_group_leader_a54e85d2941924c0c4c77032829f8d7f3}{SetTarget}}(Vector3 target)}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00123}00123     \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00124}00124         \mbox{\hyperlink{class_group_leader_a22470bec3dc7f92b0bc17282d9c94a54}{m\_Target}} = target;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00125}00125         Debug.Log(\textcolor{stringliteral}{"{}Target set to :"{}} + \mbox{\hyperlink{class_group_leader_a22470bec3dc7f92b0bc17282d9c94a54}{m\_Target}});}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00126}00126     \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00127}\mbox{\hyperlink{class_group_leader_ae39ef3c1f8e4b7a9676b72e491203354}{00127}}     \textcolor{keyword}{public} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_group_leader_ae39ef3c1f8e4b7a9676b72e491203354}{SetFormation}}(\mbox{\hyperlink{_r_t_s_game_controller_8cs_a038e169d4381c2a9b5d36e179ecc9c72}{Formations}} t\_formation)}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00128}00128     \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00129}00129         \textcolor{keywordflow}{switch} (t\_formation)}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00130}00130         \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00131}00131             \textcolor{keywordflow}{case} \mbox{\hyperlink{_r_t_s_game_controller_8cs_a038e169d4381c2a9b5d36e179ecc9c72}{Formations}}.Line:}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00132}00132                 \mbox{\hyperlink{class_group_leader_a0b68f07858de9d6574628c0a6674ed38}{SetLinePosition}}();}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00133}00133                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00134}00134 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00135}00135             \textcolor{keywordflow}{case} \mbox{\hyperlink{_r_t_s_game_controller_8cs_a038e169d4381c2a9b5d36e179ecc9c72}{Formations}}.Box:}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00136}00136                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00137}00137 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00138}00138             \textcolor{keywordflow}{case} \mbox{\hyperlink{_r_t_s_game_controller_8cs_a038e169d4381c2a9b5d36e179ecc9c72}{Formations}}.Cheveron:}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00139}00139                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00140}00140 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00141}00141             \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00142}00142                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00143}00143         \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00144}00144     \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00145}00145 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00146}\mbox{\hyperlink{class_group_leader_a0b68f07858de9d6574628c0a6674ed38}{00146}}     \textcolor{keyword}{protected} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_group_leader_a0b68f07858de9d6574628c0a6674ed38}{SetLinePosition}}()}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00147}00147     \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00148}00148         \textcolor{comment}{// Store unit count}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00149}00149         \textcolor{keywordtype}{int} amountUnits = \mbox{\hyperlink{class_group_leader_a9ed1939ca322e7b2c1038adaadfaca28}{units}}.Count;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00150}00150 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00151}00151         \textcolor{comment}{// Multiple rows}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00152}00152         \textcolor{keywordtype}{int} minimumRowSize = 9;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00153}00153         \textcolor{keywordtype}{int} maximumRows = 3;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00154}00154 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00155}00155         \textcolor{comment}{// Calculate rows}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00156}00156         \textcolor{keywordtype}{int} rows = 1;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00157}00157         \textcolor{keywordflow}{if} (amountUnits > minimumRowSize)}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00158}00158             rows = ((amountUnits -\/ 1) / minimumRowSize) + 1;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00159}00159 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00160}00160         \textcolor{keywordflow}{if} (rows > maximumRows)}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00161}00161             rows = maximumRows;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00162}00162 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00163}00163         \textcolor{comment}{// Define units per row}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00164}00164         \textcolor{keywordtype}{int} unitsPerRow = ((amountUnits -\/ 1) / rows) + 1;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00165}00165 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00166}00166         \textcolor{comment}{// Set start position}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00167}00167         Vector2 bottomLeft = \textcolor{keyword}{new} Vector2(-\/\mbox{\hyperlink{class_group_leader_aad251bd1188b3a8e02e48209775908c4}{m\_spacing}} * (unitsPerRow / 2f) + (\mbox{\hyperlink{class_group_leader_aad251bd1188b3a8e02e48209775908c4}{m\_spacing}} / 2f), \mbox{\hyperlink{class_group_leader_aad251bd1188b3a8e02e48209775908c4}{m\_spacing}} * (rows / 2f) -\/ (\mbox{\hyperlink{class_group_leader_aad251bd1188b3a8e02e48209775908c4}{m\_spacing}} / 2f));}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00168}00168 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00169}00169         Vector3 currentPosition = Vector3.zero;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00170}00170         currentPosition.x = bottomLeft.x;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00171}00171         currentPosition.y = bottomLeft.y;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00172}00172 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00173}00173         \textcolor{comment}{// Loop to create formation}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00174}00174         \textcolor{keywordtype}{int} currentRow = 1;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00175}00175         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} index = 0; index < amountUnits; index++)}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00176}00176         \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00177}00177             \textcolor{comment}{// Check if last row has a different size than other rows}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00178}00178             \textcolor{keywordflow}{if} ((rows > 1) \&\& (currentRow == rows) \&\& (index \% unitsPerRow == 0))}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00179}00179             \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00180}00180                 \textcolor{keywordtype}{int} unitsLastRow = amountUnits -\/ (unitsPerRow * (rows -\/ 1));}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00181}00181 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00182}00182                 \textcolor{keywordtype}{int} unitDifference = unitsPerRow -\/ unitsLastRow;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00183}00183                 \textcolor{keywordflow}{if} (unitDifference > 0)}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00184}00184                 \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00185}00185                     currentPosition.x += \mbox{\hyperlink{class_group_leader_aad251bd1188b3a8e02e48209775908c4}{m\_spacing}} * (unitDifference / 2f);}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00186}00186                 \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00187}00187             \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00188}00188 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00189}00189             \textcolor{comment}{// If we have transform already, set new position}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00190}00190             \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_group_leader_a3daa8e83b2e26ccdd5f8676bc55ee2f9}{m\_positions}}.Count > index)}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00191}00191             \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00192}00192                 \mbox{\hyperlink{class_group_leader_a3daa8e83b2e26ccdd5f8676bc55ee2f9}{m\_positions}}[index].position= currentPosition + transform.position;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00193}00193             \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00194}00194             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00195}00195             \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00196}00196                 GameObject gameObject = Instantiate(\mbox{\hyperlink{class_group_leader_aa94facfb49448d1b7a0aa6c7f4f36c15}{m\_FormationPointPrefab}}, transform);}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00197}00197 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00198}00198 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00199}00199                 gameObject.transform.localPosition = currentPosition;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00200}00200                 \textcolor{comment}{// Set a position parented to the leader, with a relative position}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00201}00201                 \mbox{\hyperlink{class_group_leader_a3daa8e83b2e26ccdd5f8676bc55ee2f9}{m\_positions}}.Add(gameObject.transform);}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00202}00202             \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00203}00203 }
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00204}00204             \textcolor{keywordflow}{if} (((index + 1) \% unitsPerRow) == 0)}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00205}00205             \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00206}00206                 \textcolor{comment}{// Update Y position and reset X}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00207}00207                 currentPosition.y -\/= \mbox{\hyperlink{class_group_leader_aad251bd1188b3a8e02e48209775908c4}{m\_spacing}};}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00208}00208                 currentPosition.x = bottomLeft.x;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00209}00209                 currentRow++;}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00210}00210             \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00211}00211             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00212}00212             \{}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00213}00213                 \textcolor{comment}{// Update X position}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00214}00214                 currentPosition.x += \mbox{\hyperlink{class_group_leader_aad251bd1188b3a8e02e48209775908c4}{m\_spacing}};}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00215}00215             \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00216}00216         \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00217}00217     \}}
\DoxyCodeLine{\Hypertarget{_group_leader_8cs_source_l00218}00218 \}}

\end{DoxyCode}
